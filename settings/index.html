<!doctype html>
<html>
    <head>

    </head>
    <body>
        <h1 data-i18n="settings.title"></h1>
        <p data-i18n="settings.intro"></p>

        <fieldset>
            <legend>Opties</legend>

            <div class="field row">
				<label for="hbeat" data-i18n="settings.heartbeat"></label>
                <select name="hbeat" id="hbeat" size="1">
                    <option value=""" data-i18n="settings.nobeat"></option>
                    <option value="1"" data-i18n="settings.yesbeat"></option>
                </select>
				<br><br>
				
                <label for="ipAddr" data-i18n="settings.IPaddress"></label>
				<input type="text" name="ipAddr" id="ipAddr" class="code">
			</div>
        </fieldset>
		
        <button class="right" onclick="save()"" data-i18n="settings.save"></button>
        <br><br>
       
        <fieldset>
            <legend>Info</legend>
            
            <div class="field row">
                <span data-i18n="settings.testdesc"></span>
            </div>
        </fieldset>
        
        <button class="right" onclick="test()"" data-i18n="settings.test"></button>
        
        <script type="text/javascript">
        function onHomeyReady(){
            Homey.ready();
            
            // load settings from persistemt storage
            myGetOption('hbeat');
			myGetOption('ipAddr');
        }
        

        // save settings to persistemt storage
        function save() {
            mySetOption('hbeat');
			mySetOption('ipAddr');
        }

        function test() {
            Homey.set('curstatus', 'X');        
        }

        // helper functions for persistent storage
        function myGetOption(setting) {
            Homey.get(setting, function(err, data) {
                document.getElementById(setting).selectedIndex = data;
            });        
        }
        function mySetOption(setting) {
            Homey.set(setting, document.getElementById(setting).selectedIndex);        
        }
        </script>

    </body>
</html>
